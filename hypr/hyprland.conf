#####
#
#####

# 1366x768 laptop setup
monitor = eDP-1,1366x768,0x0,1
workspace = eDP-1,1

input {
    kb_layout=
    follow_mouse = 2 # Loose
    touchpad {
        disable_while_typing = 1
        natural_scroll = 1
        tap-to-click = 1
    }
}

general {
    sensitivity = 1.0
    gaps_in = 2
    gaps_out = 4
    border_size = 1
    no_border_on_floating = 0
    col.active_border = rgb(0da9c8)
    col.inactive_border = rgb(080808)
    apply_sens_to_raw = 0 # whether to apply the sensitivity to raw input (e.g. used by games where you aim using your mouse)
    layout = dwindle
    no_cursor_warps = 1
}

decoration {
    rounding = 2
    multisample_edges = true
    blur = true
    blur_size = 9
    blur_passes = 2
    active_opacity = 1.0
    inactive_opacity = 0.95
    fullscreen_opacity = 1.0
    drop_shadow = 1
    shadow_range = 15
    col.shadow = rgba(000000df)
    col.shadow_inactive = rgba(000000df)
}

animations {
    enabled = 1
    animation = windows,    1,  2.5,    default,    slide
    animation = border,     1,  2.5,    default
    animation = fade,       1,  2.5,    default
    animation = workspaces, 1,  2.5,    default
}

dwindle {
    pseudotile = 0
    no_gaps_when_only = 1
}

gestures {
    workspace_swipe = 1
    workspace_swipe_fingers = 3
}

misc {
    layers_hog_keyboard_focus = true
}

windowrule = float,         title:.*Open.*
windowrule = float,         title:.*Save.*
windowrule = float,         title:.*Preference.*
windowrule = float,         title:.*Tor Browser.*
windowrule = float,         pinentry.*
windowrule = tile,          apparatus2

windowrule = forceinput,    krita

blurls = rofi
blurls = lockscreen

bindm = SUPER,      mouse:272,  movewindow
bindm = SUPER,      mouse:273,  resizewindow

# Keybindings
# General

bind = SUPERSHIFT,  Q,      exit,
bind = SUPERSHIFT,  R,      exec, hyprctl reload
bind = SUPERSHIFT,  B,      exec, sh -c 'eww -c ~/.config/hypr/eww reload'

# Launcher

bind = SUPER,       RETURN, exec, kitty
bind = SUPER,       P,      exec, ~/.config/hypr/bin/run-menu drun
bind = SUPER,       R,      exec, ~/.config/hypr/bin/run-menu run
bind = SUPER,       W,      exec, ~/.config/hypr/bin/run-menu window
bind = SUPERSHIFT,  P,      exec, ~/.config/hypr/bin/run-menu power
bind = SUPER,       O,      exec, ~/.config/hypr/bin/toggle-right-panel
bind = SUPER,       A,      exec, pcmanfm-qt
bind = SUPER,       C,      exec, ~/.config/scripts/pick-color-wl

# Window

bind = SUPERSHIFT,  C,      killactive,
bind = SUPER,       F,      fullscreen, 0
bind = SUPER,       M,      fullscreen, 1
bind = SUPER,       N,      pseudo
bind = SUPER,       V,      togglefloating,

bind = SUPER,       Tab,    cyclenext,

# Arrow key 
bind = SUPER,       left,   movefocus, l
bind = SUPER,       right,  movefocus, r
bind = SUPER,       up,     movefocus, u
bind = SUPER,       down,   movefocus, d

bind = SUPERSHIFT,  left,   movewindow, l
bind = SUPERSHIFT,  right,  movewindow, r
bind = SUPERSHIFT,  up,     movewindow, u
bind = SUPERSHIFT,  down,   movewindow, d

bind = SUPERCONTROL,left,   resizeactive, -20 0
bind = SUPERCONTROL,right,  resizeactive,  20 0
bind = SUPERCONTROL,up,     resizeactive,   0 -20
bind = SUPERCONTROL,down,   resizeactive,   0 20

# Vi home arrow key
bind = SUPER,       h,      movefocus, l
bind = SUPER,       l,      movefocus, r
bind = SUPER,       k,      movefocus, u
bind = SUPER,       j,      movefocus, d

bind = SUPERSHIFT,  h,      movewindow, l
bind = SUPERSHIFT,  l,      movewindow, r
bind = SUPERSHIFT,  k,      movewindow, u
bind = SUPERSHIFT,  j,      movewindow, d

bind = SUPERCONTROL,h,      resizeactive, -20 0
bind = SUPERCONTROL,l,      resizeactive,  20 0
bind = SUPERCONTROL,k,      resizeactive,   0 -20
bind = SUPERCONTROL,j,      resizeactive,   0 20

bind = SUPER,   semicolon,  submap, resize
submap = resize

    bind = ,            h,      resizeactive, -20 0
    bind = ,            l,      resizeactive,  20 0
    bind = ,            k,      resizeactive,   0 -20
    bind = ,            j,      resizeactive,   0 20

    bind = ,            left,   resizeactive, -20 0
    bind = ,            right,  resizeactive,  20 0
    bind = ,            up,     resizeactive,   0 -20
    bind = ,            down,   resizeactive,   0 20

    bind = SUPER,   semicolon,  submap, reset
    bind = SUPER,       escape, submap, reset

submap = reset

bind = SUPERSHIFT,  v,      submap, passthrough
submap = passthrough

    bind = SUPER,       escape, submap, reset

submap = reset

bind = SUPER,       g,      togglegroup,
bind = SUPERSHIFT,  Tab,    changegroupactive, f
bind = SUPER,       comma,  changegroupactive, b
bind = SUPER,       period, changegroupactive, f

# Workspace

bind = SUPER,       Prior,  workspace, -1
bind = SUPER,       Next,   workspace, +1

bind = SUPER,       1,      workspace, 1
bind = SUPER,       2,      workspace, 2
bind = SUPER,       3,      workspace, 3
bind = SUPER,       4,      workspace, 4
bind = SUPER,       5,      workspace, 5
bind = SUPER,       6,      workspace, 6
bind = SUPER,       7,      workspace, 7
bind = SUPER,       8,      workspace, 8
bind = SUPER,       9,      workspace, 9
bind = SUPER,       0,      workspace, 10

bind = SUPERSHIFT,  1,      movetoworkspace, 1
bind = SUPERSHIFT,  2,      movetoworkspace, 2
bind = SUPERSHIFT,  3,      movetoworkspace, 3
bind = SUPERSHIFT,  4,      movetoworkspace, 4
bind = SUPERSHIFT,  5,      movetoworkspace, 5
bind = SUPERSHIFT,  6,      movetoworkspace, 6
bind = SUPERSHIFT,  7,      movetoworkspace, 7
bind = SUPERSHIFT,  8,      movetoworkspace, 8
bind = SUPERSHIFT,  9,      movetoworkspace, 9
bind = SUPERSHIFT,  0,      movetoworkspace, 10

# Screenshot

bind = ,            print,  exec, ~/.config/scripts/screenshot-wl
bind = SHIFT,       print,  exec, ~/.config/scripts/screenshot-wl select
bind = CONTROL,     print,  exec, ~/.config/scripts/screenshot-wl active-window


# Volume and Media Control

bind = ,XF86AudioLowerVolume,exec,~/.config/scripts/vol lower
bind = ,XF86AudioRaiseVolume,exec,~/.config/scripts/vol raise
bind = ,XF86AudioMute,exec,~/.config/scripts/vol toggle

bind = SUPER,bracketleft,exec,~/.config/scripts/vol lower
bind = SUPER,bracketright,exec,~/.config/scripts/vol raise
bind = SUPER,backslash,exec,~/.config/scripts/vol toggle

bind = SUPERSHIFT,bracketleft,exec,~/.config/scripts/player prev
bind = SUPERSHIFT,bracketright,exec,~/.config/scripts/player next
bind = SUPERSHIFT,backslash,exec,~/.config/scripts/player toggle

# Brightness

bind = ,XF86MonBrightnessDown,exec,~/.config/scripts/brightness lower
bind = ,XF86MonBrightnessUp,exec,~/.config/scripts/brightness raise

bind = SUPERCONTROL,bracketleft,exec,~/.config/scripts/brightness lower
bind = SUPERCONTROL,bracketright,exec,~/.config/scripts/brightness raise

# Autostart 

exec-once = dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = hyprpaper
exec-once = nm-applet --indicator
exec-once = lxpolkit
exec-once = systemctl --user start xdg-desktop-portal-wlr
exec-once = swayidle -w -C ~/.config/hypr/swayidle.conf
exec-once = dunst -config ~/.config/hypr/dunstrc

exec-once = eww -c ~/.config/hypr/eww daemon
exec-once = eww -c ~/.config/hypr/eww open top-panel
exec-once = eww -c ~/.config/hypr/eww open bg-dashboard
